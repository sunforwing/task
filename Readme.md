## 开启服务

```
uvicorn app:app --host 0.0.0.0 --port 8080
```

## 测试

```
curl -X POST "http://localhost:8080/cardiomind" \
-H "Content-Type: application/json" \
-d '{
  "medical_record": "### 病史简介\\n患者男性，52岁，因“反复腹痛、腹胀2周余”于2022-04-01收入消化科。\\n\\n现病史：患者2周余前无明显诱因反复出现腹痛、腹胀，为左下腹部持续性胀痛，与活动、体位无关，进食后可加重，排便、排气后可缓解，无恶心、呕吐，无反酸、烧心，无呕血、黑便，无胸闷、胸痛，无尿频、尿痛、尿黄，无发热、畏寒，自行服用“沉香化气胶囊、阿莫西林、西甲硅油、消化酶”等药物效果欠佳，上述症状反复发作，来我院急诊就诊。急诊化验检查：总胆红素51.92μmol/L；尿素氮15.99mmol/L；肌酐189μmol/L；尿酸621μmol/L；C反应蛋白138.6mg/L；D-二聚体69.29mg/L。2022-03-31腹部CT：下腔静脉-右颈内静脉人工血管转流术后所见；符合肝硬化、脾大、腹水、侧支循环形成表现；胆囊结石；胆囊壁略厚，胆囊炎不除外；考虑脾梗死可能性大，请结合临床；腹腔渗出性改变、积液。为进一步治疗收入消化科病房。\\n\\n既往史：高血压3年，血压最高可达160/100mmHg，现服用“氯沙坦钾”治疗，血压可控制在140/90mmHg。肾病综合征、阵发性睡眠性血红蛋白尿（paroxysmal nOCTurnal hemoglobinuria，PNH）2年，给予保肾药物（具体不详），定期返院治疗。丙型肝炎2年余，经正规抗丙肝治疗后复查阴性，否认结核、伤寒等其他传染病史及密切接触史。29年前因“布加综合征”行“下腔静脉-右颈内静脉人工血管转流术”，有同期输血史。\\n\\n个人史：无特殊，否认吸烟、饮酒史。\\n\\n婚育史：适龄结婚，育有1子。\\n\\n家族史：父亲因“心肌梗死”去世，母亲健在。有1弟弟，弟弟体健。否认家族遗传病史或重大疾病史。\\n\\n### 体格检查\\n体温37.0℃，心率96次/分，呼吸20次/分，血压144/93mmHg。贫血貌，体型消瘦。右侧颈部可见一长约4cm手术瘢痕，腹部正中可见一长约15cm纵向手术瘢痕。双肺呼吸音粗，未闻及干湿性啰音。心前区无隆起及凹陷，心界无扩大。心率96次/分，节律规整，各瓣膜听诊区未闻及病理性杂音。腹部膨隆，腹壁张力大，左腹部压痛，有反跳痛。肝脾肋下未触及，Murphy’s征阴性，全腹叩诊鼓音，肝肾区无叩击痛，肠鸣音无亢进，移动性浊音阴性。双下肢轻度凹陷性水肿。\\n\\n### 辅助检查\\n患者入院后化验血常规提示贫血（血红蛋白83g/L）、血小板减少（血小板71×10<sup>9</sup>/L），且合并感染（中性粒细胞百分比82.2%，C反应蛋白138.6mg/L）。肝肾功提示胆红素升高（总胆红素37.5μmol/L，直接胆红素27.2μmol/L），低蛋白血症（27.3g/L），肾功能不全（尿素氮15.3mmo/L，肌酐183μmol/L）。凝血常规提示凝血功能障碍，血浆凝血酶原时间（PT）延长（16.2秒）、部分活化凝血活酶时间（APTT）延长（43秒），D-二聚体显著升高（52.15mg/L）。"
}'
```

## docker使用

```
###### 打包docker

# 进入项目目录
# cd ~/Desktop/task

# 创建镜像
# 格式 docker build -t 镜像名称 .

docker build -t myimage .

# 运行容器并映射端口
# 格式：docker run -d --name 容器名称 -p 8080:8080 镜像名称

docker run -d --name mycontainer1 -p 8080:8080 myimage

# 确认是否容器运行
docker ps

# 打包镜像成.tar
docker save -o Cardiomind-Agent.tar myimage:latest


---------------------------------------------------------------------
###### 部署docker

# 导入docker镜像
docker load -i Cardiomind-Agent.tar

# 确认镜像
docker images

# 运行容器
docker run -d -p 8080:8080 --name mycontainer1 sunweiyi-Cardiomind-Agent

```

